{"ast":null,"code":"import React,{useEffect}from'react';import{useDispatch,useSelector}from'react-redux';import{LinkContainer}from'react-router-bootstrap';import{Route}from'react-router-dom';import{Navbar,Nav,Container,NavDropdown}from'react-bootstrap';import{logout}from'../actions/userActions';import SearchBox from'./SearchBox';import{getUserDetails}from'../actions/userActions';import{useHistory}from\"react-router-dom\";import{CART_REMOVE_ALL_ITEMS}from'../constants/cartConstants';import Logo from'./Logo';//import SearchButtons from '../components/SearchButtons'\nimport{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";var Header=function Header(_ref){var match=_ref.match;var history=useHistory();//const userId = match.params.id\nvar dispatch=useDispatch();//const productId = match.params.id\n//const qty = history.location.search ? Number(history.location.search.split('=')[1]) : 1\nvar cart=useSelector(function(state){return state.cart;});var cartItems=cart.cartItems;//console.log('CART', cartItems )\nvar userDetails=useSelector(function(state){return state.userDetails;});var success=userDetails.success,user=userDetails.user;//console.log('User', user.isSeller)\nvar userLogin=useSelector(function(state){return state.userLogin;});var userInfo=userLogin.userInfo;useEffect(function(){if(!userInfo){history.push('/login');}else{if(userInfo){dispatch(getUserDetails(userInfo._id));}else{}}},[dispatch,history,userInfo,success]);var logoutHandler=function logoutHandler(){//history.push('/') \ndispatch(logout());dispatch({type:CART_REMOVE_ALL_ITEMS});window.localStorage.clear();//clear all localstorage\n//window.localStorage.removeItem(\"my_item_key\"); //remove one item   \n};return/*#__PURE__*/_jsx(\"header\",{children:/*#__PURE__*/_jsx(Navbar,{bg:\"primary\",variant:\"dark\",expand:\"lg\",collapseOnSelect:true,children:/*#__PURE__*/_jsxs(Container,{children:[/*#__PURE__*/_jsx(LinkContainer,{to:\"/\",children:/*#__PURE__*/_jsx(Nav.Link,{children:/*#__PURE__*/_jsx(Logo,{})})}),/*#__PURE__*/_jsx(Navbar.Toggle,{\"aria-controls\":\"basic-navbar-nav\"}),/*#__PURE__*/_jsxs(Navbar.Collapse,{id:\"basic-navbar-nav\",children:[/*#__PURE__*/_jsx(Route,{render:function render(_ref2){var history=_ref2.history;return/*#__PURE__*/_jsx(SearchBox,{history:history});}}),/*#__PURE__*/_jsxs(Nav,{className:\"m-auto\",children:[!userInfo?/*#__PURE__*/_jsx(LinkContainer,{to:\"/login\",children:/*#__PURE__*/_jsx(Nav.Link,{children:\"Sell\"})}):user.isSeller?/*#__PURE__*/_jsx(LinkContainer,{to:\"/sellingHow\",children:/*#__PURE__*/_jsx(Nav.Link,{children:\"Sell\"})}):/*#__PURE__*/_jsx(LinkContainer,{to:\"/sellerRegister\",children:/*#__PURE__*/_jsxs(Nav.Link,{children:[/*#__PURE__*/_jsx(\"i\",{className:\"fas fa-hand-holding-usd fa-lg \"}),\" Sell\"]})}),user&&user.sellerConfirmation&&user.isSeller?/*#__PURE__*/_jsx(LinkContainer,{to:\"/selllerProductlist\",children:/*#__PURE__*/_jsx(Nav.Link,{children:\"My Product List\"})}):null,user&&user.sellerConfirmation&&user.isSeller?/*#__PURE__*/_jsx(LinkContainer,{to:\"/sellerOrders\",children:/*#__PURE__*/_jsx(Nav.Link,{children:\"Seller Orders List\"})}):null,/*#__PURE__*/_jsx(LinkContainer,{to:\"/cart\",children:/*#__PURE__*/_jsxs(Nav.Link,{children:[/*#__PURE__*/_jsx(\"i\",{className:\"fas fa-shopping-cart\"}),\" Cart \",' ',/*#__PURE__*/_jsx(\"span\",{className:\"badge rounded-pill bg-danger\",children:cartItems.reduce(function(acc,item){return acc+Number(item.qty);},0)})]})}),userInfo?/*#__PURE__*/_jsxs(NavDropdown,{title:userInfo.name,id:\"username\",children:[/*#__PURE__*/_jsx(LinkContainer,{to:\"/profile\",children:/*#__PURE__*/_jsxs(NavDropdown.Item,{children:[/*#__PURE__*/_jsx(\"i\",{className:\"fas fa-user\"}),\" Profile\"]})}),/*#__PURE__*/_jsx(NavDropdown.Item,{onClick:logoutHandler,children:\" Logout\"})]}):/*#__PURE__*/_jsx(LinkContainer,{to:\"/login\",children:/*#__PURE__*/_jsxs(Nav.Link,{children:[/*#__PURE__*/_jsx(\"i\",{className:\"fas fa-user\"}),\" Sign In\"]})}),userInfo&&userInfo.isAdmin&&/*#__PURE__*/_jsxs(NavDropdown,{title:\"Admin\",id:\"adminmenu\",children:[/*#__PURE__*/_jsx(LinkContainer,{to:\"/admin/userlist\",children:/*#__PURE__*/_jsxs(NavDropdown.Item,{children:[/*#__PURE__*/_jsx(\"i\",{className:\"fas fa-users\"}),\" Users\"]})}),/*#__PURE__*/_jsx(LinkContainer,{to:\"/admin/productlist\",children:/*#__PURE__*/_jsx(NavDropdown.Item,{children:\"Products\"})}),/*#__PURE__*/_jsx(LinkContainer,{to:\"/admin/orderlist\",children:/*#__PURE__*/_jsx(NavDropdown.Item,{children:\"Orders\"})})]})]})]})]})})});};export default Header;","map":{"version":3,"sources":["/Users/onesmusnyakotyo/ocart/frontend/src/components/Header.js"],"names":["React","useEffect","useDispatch","useSelector","LinkContainer","Route","Navbar","Nav","Container","NavDropdown","logout","SearchBox","getUserDetails","useHistory","CART_REMOVE_ALL_ITEMS","Logo","Header","match","history","dispatch","cart","state","cartItems","userDetails","success","user","userLogin","userInfo","push","_id","logoutHandler","type","window","localStorage","clear","isSeller","sellerConfirmation","reduce","acc","item","Number","qty","name","isAdmin"],"mappings":"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","sourcesContent":["import React, {useEffect} from 'react'\nimport { useDispatch, useSelector } from 'react-redux'\nimport { LinkContainer } from 'react-router-bootstrap'\nimport { Route } from 'react-router-dom'\nimport {Navbar, Nav, Container, NavDropdown} from 'react-bootstrap'\nimport { logout } from '../actions/userActions'\nimport SearchBox  from './SearchBox'\nimport { getUserDetails } from '../actions/userActions'\nimport { useHistory } from \"react-router-dom\"\nimport { CART_REMOVE_ALL_ITEMS }  from '../constants/cartConstants'\nimport Logo from './Logo'\n//import SearchButtons from '../components/SearchButtons'\n\n\nconst Header = ({ match }) => {\n\n    const history = useHistory()\n\n    //const userId = match.params.id\n\n    const dispatch = useDispatch()\n\n     //const productId = match.params.id\n\n  //const qty = history.location.search ? Number(history.location.search.split('=')[1]) : 1\n\n\n  const cart = useSelector((state) => state.cart)\n  const { cartItems } = cart\n\n  //console.log('CART', cartItems )\n\n\n  \n\n    const userDetails = useSelector(state => state.userDetails)\n    const { success, user} = userDetails\n\n    \n\n\n      //console.log('User', user.isSeller)\n\n    const userLogin = useSelector(state => state.userLogin)\n    const { userInfo } = userLogin\n\n    useEffect(() => {\n        if(!userInfo) {\n            history.push('/login')\n        } else {\n            if (userInfo) {\n                dispatch(getUserDetails(userInfo._id))\n            } else{\n               \n               \n            }\n        }\n    }, [dispatch, history, userInfo, success])\n\n\n    const logoutHandler = () => {\n         //history.push('/') \n        dispatch(logout())\n       \n        dispatch({ type: CART_REMOVE_ALL_ITEMS })\n        window.localStorage.clear(); //clear all localstorage\n        //window.localStorage.removeItem(\"my_item_key\"); //remove one item   \n        \n    }\n\n\n    return (\n        <header>\n            <Navbar bg=\"primary\" variant=\"dark\" expand=\"lg\" collapseOnSelect>\n                <Container>\n                    <LinkContainer to='/' >\n                        {/* <Navbar.Brand ></Navbar.Brand> */}\n                        <Nav.Link><Logo /></Nav.Link>\n                    </LinkContainer>\n                    <Navbar.Toggle aria-controls=\"basic-navbar-nav\" />\n                    <Navbar.Collapse id=\"basic-navbar-nav\" >\n                    <Route render={({ history }) => <SearchBox history={history}  />} />\n\n                   \n                     \n                    <Nav className=\"m-auto\">\n                    {!userInfo ? (\n                        <LinkContainer to=\"/login\"> \n                            <Nav.Link>\n                                {/* <i className=\"fas fa-hand-holding-usd fa-lg \"></i>  */}\n                                Sell\n                            </Nav.Link>\n                    </LinkContainer>   \n\n                    ) : user.isSeller ? (\n                         <LinkContainer to=\"/sellingHow\"> \n                            <Nav.Link>\n                                {/* <i className=\"fas fa-hand-holding-usd fa-lg \"></i>  */}\n                                Sell\n                            </Nav.Link>\n                    </LinkContainer>   \n                    ) :\n\n                    (\n                         <LinkContainer to=\"/sellerRegister\"> \n                            <Nav.Link>\n                                <i className=\"fas fa-hand-holding-usd fa-lg \"></i> Sell\n                            </Nav.Link>\n                    </LinkContainer>   \n                    )\n                \n                }\n\n                    { user && user.sellerConfirmation && user.isSeller ? (\n                        <LinkContainer to=\"/selllerProductlist\"> \n                            <Nav.Link>\n                                My Product List\n                            </Nav.Link>\n                    </LinkContainer>   \n                    ) \n                    : (\n                         null\n                    )\n                    }\n\n                     { user && user.sellerConfirmation && user.isSeller ? (\n                        <LinkContainer to='/sellerOrders'> \n                            <Nav.Link>\n                                Seller Orders List\n                            </Nav.Link>\n                    </LinkContainer>   \n                    ) \n                    : (\n                         null\n                    )\n                    }\n\n                    \n                     \n                    <LinkContainer to=\"/cart\">  \n                        <Nav.Link>\n                            <i className= 'fas fa-shopping-cart'></i> Cart {' '}\n                            {/* <Badge variant=\"danger\"> {cartItems.reduce((acc, item) => acc + Number(item.qty), 0)}</Badge> */}\n                            <span className=\"badge rounded-pill bg-danger\">{cartItems.reduce((acc, item) => acc + Number(item.qty), 0)}</span>\n                        </Nav.Link>\n                        {/* <h6>\n                            ({cartItems.reduce((acc, item) => acc + Number(item.qty), 0)})\n                            items\n                        </h6> */}\n                    </LinkContainer>\n                    { \n                    userInfo ? (\n                        \n                        <NavDropdown title= { userInfo.name }  id='username'>\n                            <LinkContainer to='/profile'>\n                                <NavDropdown.Item><i className= 'fas fa-user'></i> Profile</NavDropdown.Item>\n                            </LinkContainer>\n                            <NavDropdown.Item onClick={ logoutHandler }> Logout</NavDropdown.Item>\n                        </NavDropdown>   \n\n                                        )\n                    : \n                        <LinkContainer to=\"/login\"> \n                            <Nav.Link>\n                                <i className= 'fas fa-user'></i> Sign In\n                            </Nav.Link>\n                        </LinkContainer>    \n                    }\n\n                    {userInfo && userInfo.isAdmin && (\n                        <NavDropdown title= 'Admin'  id='adminmenu'>\n                            <LinkContainer to='/admin/userlist'>\n                                <NavDropdown.Item><i className= 'fas fa-users'></i> Users</NavDropdown.Item>\n                            </LinkContainer>\n                            <LinkContainer to='/admin/productlist'>\n                                <NavDropdown.Item>Products</NavDropdown.Item>\n                            </LinkContainer>\n                              <LinkContainer to='/admin/orderlist'>\n                                <NavDropdown.Item>Orders</NavDropdown.Item>\n                            </LinkContainer>\n                            \n                        </NavDropdown>   \n                    )\n                    }\n                    \n                        </Nav>\n                        \n                    </Navbar.Collapse>\n                </Container>\n            </Navbar>\n        </header>\n    )\n}\n\nexport default Header\n"]},"metadata":{},"sourceType":"module"}