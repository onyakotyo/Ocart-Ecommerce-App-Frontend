{"ast":null,"code":"var _jsxFileName = \"/Users/onesmusnyakotyo/ocart/frontend/src/screens/CheckoutScreen/Success.js\",\n    _s = $RefreshSig$();\n\nimport React, { useEffect } from 'react';\nimport { withRouter } from 'react-router-dom';\nimport { useDispatch, useSelector } from 'react-redux';\nimport { Card, CardGroup, Button } from 'react-bootstrap';\nimport { LinkContainer } from 'react-router-bootstrap';\nimport { createOrder, getOrderDetails, payOrder } from '../../actions/orderActions'; //import { CART_REMOVE_ALL_ITEMS }  from '../../constants/cartConstants'\n//import { ORDER_CREATE_RESET } from '../constants/orderConstants'\n//import { USER_DETAILS_RESET } from '../constants/userConstants'\n\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nimport { Fragment as _Fragment } from \"react/jsx-dev-runtime\";\n\nconst Success = ({\n  history,\n  location\n}) => {\n  _s();\n\n  const dispatch = useDispatch();\n  const cart = useSelector(state => state.cart);\n  console.log('CART', cart); //   Calculate prices\n\n  const addDecimals = num => {\n    return (Math.round(num * 100) / 100).toFixed(2);\n  };\n\n  cart.itemsPrice = addDecimals(cart.cartItems.reduce((acc, item) => acc + item.price * item.qty, 0));\n  cart.shippingPrice = addDecimals(cart.itemsPrice > 100 ? 0 : 100);\n  cart.taxPrice = addDecimals(Number((0.15 * cart.itemsPrice).toFixed(2)));\n  cart.totalPrice = (Number(cart.itemsPrice) + Number(cart.shippingPrice) + Number(cart.taxPrice)).toFixed(2); // const orderDetails = useSelector((state) => state.orderDetails)\n  // const { order, loading, error } = orderDetails\n\n  const userLogin = useSelector(state => state.userLogin);\n  const {\n    userInfo\n  } = userLogin; // const orderPay = useSelector((state) => state.orderPay)\n  // const { loading: loadingPay, success: successPay } = orderPay\n  // const orderDeliver = useSelector((state) => state.orderDeliver)\n  // const { loading: loadingDeliver, success: successDeliver } = orderDeliver\n\n  useEffect(() => {\n    if (!userInfo) {\n      history.push('/login');\n    }\n  }, [history, userInfo]);\n  useEffect(() => {\n    if (!userInfo) {\n      //&& cart.cartItems && cart.cartItems === 0\n      history.push('/login');\n    } else {\n      dispatch(createOrder({\n        orderItems: cart.cartItems,\n        shippingAddress: cart.shippingAddress,\n        //paymentMethod: cart.paymentMethod,\n        paymentMethod: 'Stripe',\n        itemsPrice: cart.itemsPrice,\n        shippingPrice: cart.shippingPrice,\n        taxPrice: cart.taxPrice,\n        totalPrice: cart.totalPrice\n      })); //dispatch({ type: CART_REMOVE_ALL_ITEMS })\n      // window.localStorage.removeItem( \"cartItems\") //remove one item   \n      //window.localStorage.removeItem(\"paymentMethod\") //remove one item  \n      //window.localStorage.removeItem( \"shippingAddress\") //remove one item   \n    }\n  }, [history, userInfo, dispatch, cart.cartItems, cart.shippingAddress, cart.paymentMethod, cart.itemsPrice, cart.shippingPrice, cart.taxPrice, cart.totalPrice]); //   const orderId = order._id\n  //   useEffect(() => {\n  //   if (!userInfo ) {\n  //      history.push('/login')\n  //   } else {\n  //     dispatch(getOrderDetails(orderId))\n  //     dispatch(payOrder(orderId))\n  //   }\n  // }, [history, userInfo, dispatch, orderId])\n\n  return /*#__PURE__*/_jsxDEV(_Fragment, {\n    children: /*#__PURE__*/_jsxDEV(CardGroup, {\n      children: /*#__PURE__*/_jsxDEV(Card, {\n        className: \"text-center\",\n        children: [/*#__PURE__*/_jsxDEV(Card.Header, {\n          as: \"h4\",\n          children: \"Payment Successful\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 128,\n          columnNumber: 21\n        }, this), /*#__PURE__*/_jsxDEV(\"i\", {\n          className: \"fas fa-hand-holding-usd fa-lg py-3\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 130,\n          columnNumber: 21\n        }, this), /*#__PURE__*/_jsxDEV(Card.Body, {\n          children: [/*#__PURE__*/_jsxDEV(Card.Title, {\n            children: \"Thank you for your order\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 132,\n            columnNumber: 21\n          }, this), /*#__PURE__*/_jsxDEV(Card.Text, {\n            children: \"We are currently processing your order and will send you a confirmation email shortly\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 133,\n            columnNumber: 21\n          }, this), /*#__PURE__*/_jsxDEV(Card.Text, {\n            children: [\"If you have any questions, please email \", '', /*#__PURE__*/_jsxDEV(\"a\", {\n              href: \"mailto:ocartorders@example.com\",\n              children: /*#__PURE__*/_jsxDEV(\"span\", {\n                style: {\n                  color: 'green'\n                },\n                children: \"ocartorders@example.com\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 139,\n                columnNumber: 68\n              }, this)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 139,\n              columnNumber: 27\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 137,\n            columnNumber: 21\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 131,\n          columnNumber: 21\n        }, this), /*#__PURE__*/_jsxDEV(Card.Footer, {\n          children: /*#__PURE__*/_jsxDEV(LinkContainer, {\n            to: \"/\",\n            children: /*#__PURE__*/_jsxDEV(Button, {\n              variant: \"primary\",\n              children: \"Continue Shopping\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 144,\n              columnNumber: 25\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 143,\n            columnNumber: 21\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 142,\n          columnNumber: 21\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 127,\n        columnNumber: 17\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 125,\n      columnNumber: 5\n    }, this)\n  }, void 0, false);\n};\n\n_s(Success, \"zWMfe/Hqbgfz35xWhT+/Vxrfr9c=\", false, function () {\n  return [useDispatch, useSelector, useSelector];\n});\n\n_c = Success;\nexport default _c2 = withRouter(Success);\n\nvar _c, _c2;\n\n$RefreshReg$(_c, \"Success\");\n$RefreshReg$(_c2, \"%default%\");","map":{"version":3,"sources":["/Users/onesmusnyakotyo/ocart/frontend/src/screens/CheckoutScreen/Success.js"],"names":["React","useEffect","withRouter","useDispatch","useSelector","Card","CardGroup","Button","LinkContainer","createOrder","getOrderDetails","payOrder","Success","history","location","dispatch","cart","state","console","log","addDecimals","num","Math","round","toFixed","itemsPrice","cartItems","reduce","acc","item","price","qty","shippingPrice","taxPrice","Number","totalPrice","userLogin","userInfo","push","orderItems","shippingAddress","paymentMethod","color"],"mappings":"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","sourcesContent":["import React, { useEffect } from 'react';\nimport { withRouter } from 'react-router-dom';\nimport { useDispatch, useSelector } from 'react-redux'\nimport { Card, CardGroup, Button  } from 'react-bootstrap'\nimport { LinkContainer } from 'react-router-bootstrap'\nimport { createOrder, getOrderDetails, payOrder } from '../../actions/orderActions'\n//import { CART_REMOVE_ALL_ITEMS }  from '../../constants/cartConstants'\n//import { ORDER_CREATE_RESET } from '../constants/orderConstants'\n//import { USER_DETAILS_RESET } from '../constants/userConstants'\n\nconst Success = ({history, location}) => {\n\n   const dispatch = useDispatch()\n\n  const cart = useSelector((state) => state.cart)\n\n  console.log('CART', cart)\n\n   //   Calculate prices\n  const addDecimals = (num) => {\n    return (Math.round(num * 100) / 100).toFixed(2)\n  }\n\n  cart.itemsPrice = addDecimals(\n    cart.cartItems.reduce((acc, item) => acc + item.price * item.qty, 0)\n  )\n  cart.shippingPrice = addDecimals(cart.itemsPrice > 100 ? 0 : 100)\n  cart.taxPrice = addDecimals(Number((0.15 * cart.itemsPrice).toFixed(2)))\n\n  cart.totalPrice = (\n    Number(cart.itemsPrice) +\n    Number(cart.shippingPrice) +\n    Number(cart.taxPrice)\n  ).toFixed(2)\n\n\n\n  // const orderDetails = useSelector((state) => state.orderDetails)\n  // const { order, loading, error } = orderDetails\n\n   const userLogin = useSelector((state) => state.userLogin)\n  const { userInfo } = userLogin\n\n  // const orderPay = useSelector((state) => state.orderPay)\n  // const { loading: loadingPay, success: successPay } = orderPay\n\n  // const orderDeliver = useSelector((state) => state.orderDeliver)\n  // const { loading: loadingDeliver, success: successDeliver } = orderDeliver\n\n\n   useEffect(() => {\n    if (!userInfo ) {\n       history.push('/login')\n    } \n  }, [history, userInfo])\n  \n  useEffect(() => {\n\n    if(!userInfo ) {\n      //&& cart.cartItems && cart.cartItems === 0\n      history.push('/login')\n    } else {    \n\n      dispatch(createOrder({\n        orderItems: cart.cartItems,\n        shippingAddress: cart.shippingAddress,\n        //paymentMethod: cart.paymentMethod,\n        paymentMethod: 'Stripe',\n        itemsPrice: cart.itemsPrice,\n        shippingPrice: cart.shippingPrice,\n        taxPrice: cart.taxPrice,\n        totalPrice: cart.totalPrice\n      }))\n\n      //dispatch({ type: CART_REMOVE_ALL_ITEMS })\n\n      // window.localStorage.removeItem( \"cartItems\") //remove one item   \n       //window.localStorage.removeItem(\"paymentMethod\") //remove one item  \n       //window.localStorage.removeItem( \"shippingAddress\") //remove one item   \n\n    }\n  }, [\n        history,\n        userInfo,\n        dispatch,\n        cart.cartItems,\n        cart.shippingAddress,\n        cart.paymentMethod,\n        cart.itemsPrice,\n        cart.shippingPrice,\n        cart.taxPrice,\n        cart.totalPrice\n  ])\n\n  //   const orderId = order._id\n\n  //   useEffect(() => {\n  //   if (!userInfo ) {\n  //      history.push('/login')\n  //   } else {\n  //     dispatch(getOrderDetails(orderId))\n  //     dispatch(payOrder(orderId))\n  //   }\n  // }, [history, userInfo, dispatch, orderId])\n      \n\n  \n\n    \n    \n  \n\n\n  \n\n \n    \n\n\n\n\n  return (\n    \n    <>\n    <CardGroup>\n                \n                <Card className=\"text-center\">\n                    <Card.Header as=\"h4\">Payment Successful</Card.Header>\n                \n                    <i className=\"fas fa-hand-holding-usd fa-lg py-3\" ></i>\n                    <Card.Body>\n                    <Card.Title>Thank you for your order</Card.Title>\n                    <Card.Text>\n                        We are currently processing your order and \n                        will send you a confirmation email shortly\n                    </Card.Text>\n                    <Card.Text>\n                       If you have any questions, please email {''}\n                          <a href=\"mailto:ocartorders@example.com\"><span style={{color: 'green'}}>ocartorders@example.com</span></a>\n                    </Card.Text>\n                    </Card.Body>\n                    <Card.Footer>\n                    <LinkContainer to='/'>\n                        <Button variant=\"primary\">Continue Shopping</Button>\n                    </LinkContainer>\n                    \n                    </Card.Footer>\n                </Card>\n            </CardGroup>\n        </>\n  );\n}\n\nexport default withRouter(Success);"]},"metadata":{},"sourceType":"module"}