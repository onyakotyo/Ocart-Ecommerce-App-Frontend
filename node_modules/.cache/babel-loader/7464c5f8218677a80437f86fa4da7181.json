{"ast":null,"code":"import React,{useEffect}from'react';import{LinkContainer}from'react-router-bootstrap';import{Table,Button}from'react-bootstrap';import{useDispatch,useSelector}from'react-redux';import Message from'../components/Message';import Loader from'../components/Loader';import{listSellerOrders}from'../actions/orderActions';import{getUserDetails}from'../actions/userActions';import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";import{Fragment as _Fragment}from\"react/jsx-runtime\";var SellerOrderListScreen=function SellerOrderListScreen(_ref){var history=_ref.history;var dispatch=useDispatch();var sellerOrderList=useSelector(function(state){return state.sellerOrderList;});var loading=sellerOrderList.loading,error=sellerOrderList.error,orders=sellerOrderList.orders;var userLogin=useSelector(function(state){return state.userLogin;});var userInfo=userLogin.userInfo;var userDetails=useSelector(function(state){return state.userDetails;});var user=userDetails.user;useEffect(function(){if(userInfo){dispatch(getUserDetails(userInfo._id));}else{history.push('/login');}},[dispatch,history,userInfo]);useEffect(function(){if(userInfo&&user.isSeller){dispatch(listSellerOrders());}else{history.push('/login');}},[dispatch,history,userInfo,user.isSeller]);return/*#__PURE__*/_jsxs(_Fragment,{children:[/*#__PURE__*/_jsx(\"h1\",{children:\"Seller Orders List\"}),loading?/*#__PURE__*/_jsx(Loader,{}):error?/*#__PURE__*/_jsx(Message,{variant:\"danger\",children:error}):/*#__PURE__*/_jsxs(Table,{striped:true,bordered:true,hover:true,responsive:true,className:\"table-sm\",children:[/*#__PURE__*/_jsx(\"thead\",{children:/*#__PURE__*/_jsxs(\"tr\",{children:[/*#__PURE__*/_jsx(\"th\",{children:\"ID\"}),/*#__PURE__*/_jsx(\"th\",{children:\"USER\"}),/*#__PURE__*/_jsx(\"th\",{children:\"EMAIL\"}),/*#__PURE__*/_jsx(\"th\",{children:\"DATE\"}),/*#__PURE__*/_jsx(\"th\",{children:\"TOTAL\"}),/*#__PURE__*/_jsx(\"th\",{children:\"PAID\"}),/*#__PURE__*/_jsx(\"th\",{children:\"DELIVERED\"}),/*#__PURE__*/_jsx(\"th\",{})]})}),/*#__PURE__*/_jsx(\"tbody\",{children:orders.map(function(order){return/*#__PURE__*/_jsxs(\"tr\",{children:[/*#__PURE__*/_jsx(\"td\",{children:order.orderId}),/*#__PURE__*/_jsx(\"td\",{children:order.user.name}),/*#__PURE__*/_jsx(\"td\",{children:order.user.email}),/*#__PURE__*/_jsx(\"td\",{children:order.createdAt.substring(0,10)}),/*#__PURE__*/_jsxs(\"td\",{children:[\"$\",order.totalPrice]}),/*#__PURE__*/_jsx(\"td\",{children:order&&order.isPaid?order.paidAt.substring(0,10)//order.paidAt\n:/*#__PURE__*/_jsx(\"i\",{className:\"fas fa-times\",style:{color:'red'}})}),/*#__PURE__*/_jsx(\"td\",{children:order&&order.isDelivered?order.deliveredAt.substring(0,10):/*#__PURE__*/_jsx(\"i\",{className:\"fas fa-times\",style:{color:'red'}})}),/*#__PURE__*/_jsx(\"td\",{children:/*#__PURE__*/_jsx(LinkContainer,{to:\"/order/\".concat(order._id),children:/*#__PURE__*/_jsx(Button,{variant:\"success\",className:\"btn-sm \",children:\"Details\"})})})]},order._id);})})]})]});};export default SellerOrderListScreen;","map":{"version":3,"sources":["/Users/onesmusnyakotyo/ocart/frontend/src/screens/SellerOrderListScreen.js"],"names":["React","useEffect","LinkContainer","Table","Button","useDispatch","useSelector","Message","Loader","listSellerOrders","getUserDetails","SellerOrderListScreen","history","dispatch","sellerOrderList","state","loading","error","orders","userLogin","userInfo","userDetails","user","_id","push","isSeller","map","order","orderId","name","email","createdAt","substring","totalPrice","isPaid","paidAt","color","isDelivered","deliveredAt"],"mappings":"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","sourcesContent":["import React, { useEffect } from 'react'\nimport { LinkContainer } from 'react-router-bootstrap'\nimport {  Table, Button } from 'react-bootstrap'\nimport { useDispatch, useSelector } from 'react-redux'\nimport Message from '../components/Message'\nimport Loader from '../components/Loader'\nimport { listSellerOrders } from '../actions/orderActions'\nimport { getUserDetails } from '../actions/userActions'\n\nconst SellerOrderListScreen = ({ history }) => {\n\n  \n\n  const dispatch = useDispatch()\n\n  const sellerOrderList = useSelector((state) => state.sellerOrderList)\n  const { loading, error, orders } = sellerOrderList\n  \n\n  const userLogin = useSelector((state) => state.userLogin)\n  const { userInfo } = userLogin\n\n    const userDetails = useSelector(state => state.userDetails)\n    const {user} = userDetails\n\n  useEffect(() => {\n    if (userInfo) {\n      dispatch(getUserDetails(userInfo._id))\n    } else {\n      history.push('/login')\n    }\n  }, [dispatch, history, userInfo])\n\n   useEffect(() => {\n    if (userInfo && user.isSeller) {\n      dispatch(listSellerOrders())\n    } else {\n      history.push('/login')\n    }\n  }, [dispatch, history, userInfo, user.isSeller])\n\n  return (\n    <>\n      \n      <h1>Seller Orders List</h1>\n      {loading ? (\n        <Loader />\n      ) : error ? (\n        <Message variant='danger'>{error}</Message>\n      ) : (\n        \n        <Table striped bordered hover responsive className='table-sm'>\n          <thead>\n            <tr>\n              <th>ID</th>\n              <th>USER</th>\n              <th>EMAIL</th>\n              <th>DATE</th>\n              <th>TOTAL</th>\n              <th>PAID</th>\n              <th>DELIVERED</th>\n              <th></th>\n            </tr>\n          </thead>\n          <tbody>\n            {orders.map((order) => (\n              <tr key={order._id}>\n                <td>{order.orderId}</td>\n                <td>{order.user.name }</td>\n                <td>{order.user.email }</td>\n                <td>{order.createdAt.substring(0, 10)}</td>\n                <td>${order.totalPrice}</td>\n                <td>\n                  {order && order.isPaid  ? (\n                    order.paidAt.substring(0, 10) \n                    //order.paidAt\n                  ) : (\n                    <i className='fas fa-times' style={{ color: 'red' }}></i>\n                  )}\n                </td>\n                <td>\n                  {order && order.isDelivered ? (\n                    order.deliveredAt.substring(0, 10)\n                  ) : (\n                    <i className='fas fa-times' style={{ color: 'red' }}></i>\n                  )}\n                </td>\n                <td>\n                  <LinkContainer to={`/order/${order._id}`} >\n                    <Button variant='success' className='btn-sm '>\n                      Details\n                    </Button>\n                  </LinkContainer>\n                </td>\n              </tr>\n            ))}\n          </tbody>\n\n        </Table>\n        \n      )}\n      \n    </>\n  )\n}\n\nexport default SellerOrderListScreen"]},"metadata":{},"sourceType":"module"}